#include<stdio.h>
#include<graphics.h>
#include<conio.h>
#include<stdio.h>
#include<dos.h>
#include<bios.h>
#include<stdlib.h>

//########################################################################//
//GLOBAL DECLARATION
int i=0,j=0,x=0,y=0,p[50][50],a[50][50],ch=0;
int fc=0,fx[10],fy[10],ft=1,t=1,tempx[10],tempy[10],finc; //fire variable
int gscore=0,life=3;
int ll[20][20],l1=0,lx=635,ly=140;
int ex1=635,ey1=20,ex2=635,ey2=60,ex3=635,ey3=100;
int ek1=0,ek2=0,ek3=0;
int key,x1,y1,xs=50,ys=422;

//########################################################################//

void loading()  {
int i,x,j,y=200,k=0,x1=100;
int t[60][60]={ {0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
		{0,0,0,0,0,0,0,0,0,0,0,4,4,1,1,1,1,1,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
		{0,0,0,0,0,0,0,0,0,4,4,1,1,1,1,1,1,1,1,1,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0},
		{0,0,0,0,0,0,0,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,0,0,0,0,0,0,0,0,0,0,0,0},
		{0,0,0,0,0,0,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,0,0,0,0,0,0,0,0,0,0},
		{0,0,0,0,0,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,0,0,0,0,0,0,0,0,0,0},
		{0,0,0,0,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,0,0,0,0,0,0,0,0,0},
		{0,0,0,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,0,0,0,0,0,0,0,0},
		{0,0,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,0,0,0,0,0,0,0},
		{0,0,4,1,1,1,1,1,1,3,3,3,1,1,1,1,1,1,1,3,3,3,1,1,1,1,1,1,4,0,0,0,0,0,0,0},
		{0,4,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,4,0,0,0,0,0,0},
		{0,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,0,0,0,0,0,0},
		{0,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,0,0,0,0,0,0},
		{4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,0,0,0,0,0},
		{4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,0,0,0,0,0},
		{4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,0,0,0,0,0},
		{4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,0,0,0,0,0},
		{4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,0,0,0,0,0},
		{0,4,1,1,1,1,1,3,3,3,1,1,1,1,1,1,1,1,1,1,1,3,3,3,1,1,1,1,1,4,0,0,0,0,0,0},
		{0,4,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,4,0,0,0,0,0,0},
		{0,4,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,4,0,0,0,0,0,0},
		{0,0,4,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,4,0,0,0,0,0,0,0},
		{0,0,4,1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,4,0,0,0,0,0,0,0},
		{0,0,0,4,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,4,0,0,0,0,0,0,0,0},
		{0,0,0,0,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,0,0,0,0,0,0,0,0,0},
		{0,0,0,0,0,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,0,0,0,0,0,0,0,0,0},
		{0,0,0,0,0,0,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,0,0,0,0,0,0,0,0,0,0,0,0,0},
		{0,0,0,0,0,0,0,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,0,0,0,0,0,0,0,0,0,0},
		{0,0,0,0,0,0,0,0,0,4,4,1,1,1,1,1,1,1,1,1,4,4,0,0,0,0,0,0,0,0,0,0,0,0},
		{0,0,0,0,0,0,0,0,0,0,0,4,4,1,1,1,1,1,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
		{0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
		};


	cleardevice();
	settextstyle(7,HORIZ_DIR,7);
	outtextxy(170,100,"Loading...");


	 settextstyle(7, HORIZ_DIR, 3);
	 outtextxy(350,330,"Created by :)");
       //	settextstyle(7,HORIZ_DIR,3);
	outtextxy(400,370,"Ami (RollNo:50)");
      //	settextstyle(7,HORIZ_DIR,3);
	outtextxy(400,400,"Aniketa (RollNo:51)");

	for(k=0;k<5;k++,x1+=100)
		for(i=0,y=200;i<=40;i++,y++)
			for(j=0,x=x1;j<=50;j++,x++)
			{
				if(t[i][j]==3)
					 putpixel(x,y,BLACK);
				if(t[i][j]==4)
					putpixel(x,y,15);
			}

	for(k=1,x1=100;k<=5;k++,x1+=100)
		for(j=0,x=x1;j<=50;j++,x++)
			for(i=0,y=200;i<=40;i++,y++)
			{
				if(t[i][j]==1)
					putpixel(x,y,k+1);
					delay(2);
			}

	cleardevice();
}

//########################################################################
void smile(int xs, int ys)  {
   setcolor(YELLOW);
   circle(xs,ys,25);
   setfillstyle(SOLID_FILL,YELLOW);
   floodfill(xs,ys,YELLOW);

   setcolor(BLACK);
   setfillstyle(SOLID_FILL,BLACK);
   //eyes
   fillellipse(xs-6,ys-15,2,6);
   fillellipse(xs+6,ys-15,2,6);
   //smile
   ellipse(xs,ys,205,335,20,9);
   ellipse(xs,ys,205,335,20,10);
   ellipse(xs,ys,205,335,20,11);

}
//########################################################################
void view()  {
	     setcolor(YELLOW);
	 settextstyle(7, HORIZ_DIR, 2);
	 outtextxy(250,0,"DIZZY PAUL");
   //background
   setcolor(CYAN);   //border
   rectangle(20,20,630,450);
  //  line(20,20,630,20);
  //  line(20,20,20,450);
  //  line(20,450,630,450);
  //  line(630,450,630,20);
    //background
    line(150,450,150,380);
    line(150,380,250,380);
    line(250,380,250,300);
    line(250,300,350,300);
    line(350,300,350,330);
    line(350,330,450,330);
    line(450,330,450,300);
    line(450,300,500,300);
    // line(500,300,630,250);
    //ellipse(160,100,270,90,70,88);
    //ellipse(180,60,26,25,30,20);
    //..........................
    line(20,380,90,380);
    line(90,380,90,320);
    line(90,320,190,320);
    line(190,320,190,240);
    line(190,240,390,240);
    line(390,240,400,260);
    line(400,260,410,240);
   // line(410,240,500,240);
    rectangle(410,240,570,230);
   // line(500,240,570,210);
     rectangle(500,300,630,310);
     rectangle(560,235,550,135);
     rectangle(400,140,570,130);
   // rectangle(450,100,270,90);
     rectangle(460,20,450,135);

      //fillpoly(5);
      setcolor(GREEN);
      line(150,380,200,450);
      line(250,380,300,450);
      line(250,300,350,450);
      line(350,330,430,450);
      line(450,330,530,450);
      line(630,450,530,310);
      //....................
      line(90,380,20,280);
      line(90,320,20,220);
      line(190,320,20,100);
      line(190,240,20,20);
      line(290,240,120,20);
      line(390,240,240,20);
      line(480,230,420,140);
      line(415,130,340,20);
      line(550,230,490,140);
      line(450,70,420,20);
       setcolor(RED);
       line(500,20,500,50);
      // fill(GREEN);
       setfillstyle(SOLID_FILL,YELLOW);
       rectangle(490,50,510,70);
}
//#######################################################################
 void s1()
{
    settextstyle(1,0,5);
    setcolor(CYAN);
    outtextxy(190,40,"INSTRUCTION");
    outtextxy(110,70,"*************************");
    settextstyle(1,0,2);
    setcolor(MAGENTA);
    outtextxy(60,130,"1. PRESS LEFT ARROW KEY FOR LEFT MOVEMENT");
    outtextxy(60,160,"2. PRESS RIGHT ARROW KEY FOR RIGHT MOVEMENT");
    outtextxy(60,190,"3. PRESS UP ARROW KEY FOR TOP MOVEMENT");
    outtextxy(60,220,"4. PRESS DOWN ARROW KEY FOR BOTTOM MOVEMENT");
    outtextxy(60,250,"5. DON'T ALLOW TO GO OUTSIDE OF THE PATH");
    getch();
}

//#######################################################################
void end()
{
cleardevice();
setbkcolor(YELLOW);
setcolor(CYAN);

settextstyle(1,0,5);
outtextxy(50,100,"SCORE IS ==> 100");
//outtextxy(330,100,strscore);
settextstyle(1,0,4);
outtextxy(200,180,"Thanks for playing game...");

getch();
exit(0);
}
//#####################################################################
void stop()
{
cleardevice();
setbkcolor(LIGHTBLUE);
setcolor(BLUE);

settextstyle(1,0,5);
outtextxy(50,100,"SCORE IS ==> 000");

settextstyle(1,0,4);
outtextxy(200,180,"YOU lost the GAME...");

getch();
exit(0);
}


//#######################################################################
int main(void)
{
int gd=DETECT,gm;

initgraph(&gd,&gm,"c:\\tc\\bgi");
    // GAME START
		loading();
      //instructions..
	s1();
	cleardevice();

       view();

       smile(xs,ys);

   //MAIN COAD................................................

     key=0;
      while(key!=7181)  {
	      key=bioskey(0);

	  if(key==19712) //right
		 xs=xs+3;
	  if(key==19200) //left
	      xs=xs-3;
	  if(key==18432) //up
	      ys=ys-3;
	  if(key==20480) //down
	      ys=ys+3;

	  if(xs==500 && ys<=60 )
	     {
		end();
	     }
	   if(xs<=40 && ys>=400 || xs<=100 && ys>=430)
		  stop();   //exit(0);
	  //vertical line.............................
	   if(xs>=125 && ys>=420 || xs>=230 && ys>=300)
			   stop();  //	      exit(0);
	    if(xs>=630 && ys<=350 )
		stop(); 	 // exit(0);
	   if(xs>=450 && ys>=300 || xs>=610 && ys>=200)
		stop(); //exit(0);
      //	   if(xs>=450 && ys>=300 || xs>=610 && ys>=200)
	//	 stop();   //	 exit(0);

	    //horizontal line .................................
	     if(xs<=90 && ys<=405 || xs<=190 && ys<=340)
		 stop();	      //	 exit(0);
	     if(xs>=190 && ys<=260 || xs<=390 && ys<=240)
		 if(xs>=500 && ys<=390) { }
		 else
		  stop();     	//  exit(0);
	     if(xs>=550 && ys<=40 )
		stop();		// exit(0);

		     cleardevice();
		     smile(xs,ys);	  view();
}
//mytime();
   closegraph();
   getch();
   return 0;
   }

//################################################################







 
  /*
  if(xs<=100 && ys<=380 || xs<=150 && ys<=300 || xs<=250 && ys<=250){}
	//rectangle(50,100,70,230);   //vertical
  if( (x1>=150 && x1<=150) && ( (y1+10)>=380 && (y1-10)<=450) )
    exit(0);
  if( (y1>=380 && y1<=450) && ( (x1+10)>=150 && (x1-10)<=150) )
    exit(0);
   */  //..........................................
    //	 if(xs>=120 && ys>=420 || xs>=250 && ys>=300){
      //	      exit(0);
    //	   stop();
	//  }
  //   else
  //f(xs>=120 && ys>=420 || xs>=250 && ys>=300){
	//   stop();//	exit(0);
	 //
  // else

	/*
	  if(xs>=120 && ys>=420 || xs>=250 && ys>=300){
		 //  smile(xs,ys);
	     stop();//	 exit(0);
	  }
	  else
	  */
	    /*	  .....   if(xs>=120 && ys<=450 || xs>=230 && ys>=300)
	       stop();	// exit(0);
	       if(xs==410 && ys==390 || xs>=430 && ys>=300)
		 // exit(0);
		   if(xs>=150 && ys>=380 || xs>=250 && ys>=300)
		  exit(0);
	 //     exit(0);
	   //   if(xs>=120 && ys>=420 || xs>=250 && ys>=300)
	     //	exit(0);

		   if(xs>=130 && xs>=420 ||(ys+10)>=250 && (ys+10)>=300)
	       //	 exit(0);
		stop();
	     if(xs==410 && ys==390 || xs>=430 && ys>=240)
		//  exit(0);
		stop();
	     if(xs>=450 && ys>=300 || xs>=610 && ys>=200)
	     //	 exit(0);
		stop();
	  //horizontal line .................................
	     if(xs<=90 && ys<=405 || xs<=190 && ys<=340)
	       //	 exit(0);
	       stop();
	     if(xs>=190 && ys<=260 || xs<=390 && ys<=240)
		//  exit(0);
		stop();
	     if(xs>=550 && ys<=40 )
		// exit(0);
		stop();
  //n	      if( (xs>=20 && xs<=630) && (( ys+10)>=20 && (ys-10)<=450 ))
//	      stop();
//	       if( (xs>=20 && xs<=630) && ((ys+10)>=20 && (ys-10)<=450 ))
  */	      // stop();
